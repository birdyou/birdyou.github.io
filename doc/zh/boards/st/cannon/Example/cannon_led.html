<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<title>JUMA SDK</title>
<!-- Bootstrap core CSS -->
<link href="http://www.juma.io/doc/static/css/bootstrap.min.css" rel="stylesheet">
<link href="http://www.juma.io/doc/static/css/table.css" rel="stylesheet">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<style>
.navbar-brand{
padding:0px;
width: 120px;
background-image: url("http://www.juma.io/doc/static/JUMA-LOGO.png");
background-size: 60% 40%;
background-repeat: no-repeat;
background-position: center;
}
.content-section-a {
padding: 20px 0;
background-color: #f8f8f8;
}
.well-font { font-size: 16px; }
</style>
<SCRIPT>
var menu_wwwzzjsnet=function(){
var t=15,z=50,s=6,a;
function dd(n){this.n=n; this.h=[]; this.c=[]}
dd.prototype.init=function(p,c){
a=c; var w=document.getElementById(p), s=w.getElementsByTagName('ul'), l=s.length, i=0;
for(i;i<l;i++){
var h=s[i].parentNode; this.h[i]=h; this.c[i]=s[i];
h.onmouseover=new Function(this.n+'.st('+i+',true)');
h.onmouseout=new Function(this.n+'.st('+i+')');
}
}
dd.prototype.st=function(x,f){
var c=this.c[x], h=this.h[x], p=h.getElementsByTagName('a')[0];
clearInterval(c.t); c.style.overflow='hidden';
if(f){
p.className+=' '+a;
if(!c.mh){c.style.display='block'; c.style.height=''; c.mh=c.offsetHeight; c.style.height=0}
if(c.mh==c.offsetHeight){c.style.overflow='visible'}
else{c.style.zIndex=z; z++; c.t=setInterval(function(){sl(c,1)},t)}
}else{p.className=p.className.replace(a,''); c.t=setInterval(function(){sl(c,-1)},t)}
}
function sl(c,f){
var h=c.offsetHeight;
if((h<=0&&f!=1)||(h>=c.mh&&f==1)){
if(f==1){c.style.filter=''; c.style.opacity=1; c.style.overflow='visible'}
clearInterval(c.t); return
}
var d=(f==1)?Math.ceil((c.mh-h)/s):Math.ceil(h/s), o=h/c.mh;
c.style.opacity=o; c.style.filter='alpha(opacity='+(o*100)+')';
c.style.height=h+(d*f)+'px'
}
return{dd:dd}
}();
</SCRIPT>
</head>
<body>
<nav class="navbar navbar-inverse">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://www.juma.io"></a>
</div>
<div id="navbar" class="collapse navbar-collapse">
<ul class="nav navbar-nav">
<li><a href="http://www.juma.io/doc/zh/introduction/index.html">概述</a></li>
<li><a href="http://www.juma.io/doc/zh/boards.html">硬件</a></li>
<li><a href="http://www.juma.io/doc/zh/embedded_sdk.html">嵌入式</a></li>
<li><a href="http://www.juma.io/doc/zh/android_sdk.html">Android</a></li>
<li><a href="http://www.juma.io/doc/zh/ios_sdk.html">iOS</a></li>
</ul>
</div><!-- /.nav-collapse -->
</div><!-- /.container -->
</nav><!-- /.navbar -->
<div class="container">
<div class="row row-offcanvas row-offcanvas-right">
<div class="col-xs-12 col-sm-9">
<h1 id="cannon蓝牙遥控点灯">Cannon蓝牙遥控点灯</h1>
<hr />
<h2 id="一概述">一、概述</h2>
<p>本例展示手机APP如何通过蓝牙遥控点亮Cannon开发板上的LED。通过本例您可以学习SDK中BLE APIs和调度APIs的用法。</p>
<hr />
<h2 id="二获取嵌入式sdk及例程">二、获取嵌入式SDK及例程</h2>
<p>下载最新的嵌入式SDK(发布版)：<br /><a href="https://github.com/JUMA-IO/STM32_Platform/releases" class="uri">https://github.com/JUMA-IO/STM32_Platform/releases</a><br />如JUMA STM32 Platform SDK v1.0.0：<br /><img src="sdk_release.jpg" /></p>
<pre><code>注意，如果您想获知最新的代码改动情况，请使用github的“watch”功能。</code></pre>
<hr />
<h2 id="三编译和烧录嵌入式软件">三、编译和烧录嵌入式软件</h2>
<h3 id="step1.-打开样本工程">Step1. 打开样本工程：</h3>
<pre><code>x:/Cannon/product/application/remote_control/mdk-arm/CAF.uvproj</code></pre>
<div class="figure">
<img src="remote_control_path.jpg" />

</div>
<h3 id="step2.-编译工程">Step2. 编译工程</h3>
<div class="figure">
<img src="./yiwI1p2.png" />

</div>
<h3 id="step3.-烧入软件">Step3. 烧入软件</h3>
<div class="figure">
<img src="./yatJwos.png" />

</div>
<hr />
<h2 id="四手机安装ble调试助手app">四、手机安装“BLE调试助手”APP</h2>
<p>不像先前的SensorTag，我们没有为遥控点灯专门制作一个APP，不过您可以通过“BLE调试助手”来实现遥控点灯。就像它的命名一样，“BLE调试助手”是一个调试APP，可以发送或接收手机和设备之间的原始蓝牙数据。本例中，我们使用“BLE调试助手”给Cannon发送一个数据，Cannon接收到该数据后，就点亮LED。</p>
<h4 id="android手机用户">1. Android手机用户</h4>
<p>如果您使用Anddroid手机，有三种方式安装“BLE调试助手”：<br />第一种方式：使用Android的APK文件，该文件位于SDK的tools目录下：</p>
<pre><code>x:/Cannon/tools/JumaBleHelper.apk</code></pre>
<p>将该文件传送到Android手机，直接安装便可。</p>
<p>第二种方式：如果您熟悉Android开发环境，可以使用“BLE调试助手”的源码来安装。Android版本的“BLE调试助手”APP的源码位于：<br /><a href="https://github.com/JUMA-IO/BLE_Debugger_Android" class="uri">https://github.com/JUMA-IO/BLE_Debugger_Android</a></p>
<p>第三种方式：您可以从百度APP市场下载安装：<br /><a href="http://shouji.baidu.com/software/item?docid=8645078" class="uri">http://shouji.baidu.com/software/item?docid=8645078</a></p>
<h4 id="iphone手机用户">2. iPhone手机用户</h4>
<p>如果您使用iPhone手机，有两种方式安装“BLE调试助手”：<br />第一种方式：您可以从AppStore搜索、下载和安装“JUMA BLE调试助手”。<br /><a href="https://itunes.apple.com/cn/app/juma-ble-diao-shi-zhu-shou/id1027737596" class="uri">https://itunes.apple.com/cn/app/juma-ble-diao-shi-zhu-shou/id1027737596</a></p>
<p>第二种方式：如果您熟悉iPhone开发环境，可以使用“BLE调试助手”的源码来安装。iOS版本的“BLE调试助手”APP的源码位于：<br /><a href="https://github.com/JUMA-IO/BLE_Debugger_iOS" class="uri">https://github.com/JUMA-IO/BLE_Debugger_iOS</a></p>
<hr />
<h2 id="五和手机app通信">五、和手机APP通信</h2>
<h3 id="step1.-打开手机的蓝牙功能">Step1. 打开手机的蓝牙功能</h3>
<div class="figure">
<img src="./mobile_bluetooth.jpg" />

</div>
<h3 id="step2.-运行ble调试助手app">Step2. 运行“BLE调试助手”APP</h3>
<p>打开后的界面如下：<br /><img src="./ndCv2Ee.png" /></p>
<h3 id="step3.-扫描和连接设备">Step3. 扫描和连接设备</h3>
<p>点击Scan进行设备扫描，之后会看到如下的扫描结果：<br /><img src="./OIezg9Y.png" /></p>
<p>选择“BlueNRG_LED”或者“Cannon”起始的设备名，再点击Start/Connect按钮进行连接。</p>
<h3 id="step4.-app发送数据遥控点灯">Step4. APP发送数据遥控点灯</h3>
<p>之后APP可以发送数据给Cannon，Cannon接受到特定的数据后，会点亮LED。具体做法为：</p>
<ul>
<li>长按按钮“1”，在编辑框中输入“01”(十六进制的数值)表示点灯。</li>
<li>长按按钮“2”，在编辑框中输入“00”(十六进制的数值)表示熄灭。</li>
</ul>
<p>然后点击按钮1或者按钮2，APP就会给Cannon发0x01和0x02了。</p>
<pre><code>注意，调试助手会封装数据，比如：
点亮LED时数据内容为：0x01，实际发送0x010101；
熄灭时数据位内容为：0x00，实际发送0x010100。
其中数据格式为：第1个字节为数据类型，第2个字节为数据长度，第三个字节为数据内容。    </code></pre>
<hr />
<h2 id="六阅读代码">六、阅读代码</h2>
<p>本例中的嵌入式代码位于：</p>
<pre><code>x:/Cannon/product/application/remote_control/app.c</code></pre>
<p>代码量很少，已配有注释，非常方便阅读。<br />如果您对其中的BLE APIs和调度APIs有所疑问，请查阅相应的API说明：<br /><a href="http://www.juma.io/doc/zh/embedded_sdk.html" class="uri">http://www.juma.io/doc/zh/embedded_sdk.html</a></p>

</div>
<div class="col-xs-6 col-sm-3" id="sidebar">
<div class="list-group">

<h4><Strong>nRF51平台</Strong></h4>

<a href="http://www.juma.io/doc/zh/boards/nordic/basic.html">基础知识</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/boards/nordic/basic/general.html">进阶流程</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/nordic/basic/dev_env_build.html">环境配置</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/boards/nordic/nova.html">NOVA开发指南</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/boards/nordic/nova/Resource/nova_resource.html">板子介绍</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/nordic/nova/Download/Down_load_process.html">烧入方法</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/nordic/nova/Example/Example_Explain.html">入门案例</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/boards/nordic/smp.html">SMP开发指南</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/boards/nordic/smp/Resource/smp_resource.html">板子介绍</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/nordic/smp/Download/Down_load_process.html">烧入方法</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/nordic/smp/Example/Example_Explain.html">入门案例</a></li>

</ul>


<h4><Strong>STM32平台</Strong></h4>

<a href="http://www.juma.io/doc/zh/boards/st/basic.html">基础知识</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/boards/st/basic/general.html">进阶流程</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/st/basic/dev_env_build.html">环境配置</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/boards/st/cannon.html">Cannon开发指南</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/boards/st/cannon/Resource/cannon_resource.html">板子介绍</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/st/cannon/Download/cannon_download.html">烧入方法</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/st/cannon/Example/cannon_sensor.html">案例1：读取传感器</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/st/cannon/Example/cannon_led.html">案例2：蓝牙点灯</a></li>

<li><a href="http://www.juma.io/doc/zh/boards/st/cannon/Faq/faq.html">常见问题FAQ</a></li>

</ul>


</div>
</div><!--/.sidebar-offcanvas-->
</div><!--/row-->
<hr>
<footer>
<p>&copy; Juma Docs 2015</p>
</footer>
</div><!--/.container-->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="http://www.juma.io/static/js/jquery.min.js"></script>
<script src="http://www.juma.io/static/js/bootstrap.min.js"></script>
</body>
</html>
