<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<title>JUMA SDK</title>
<!-- Bootstrap core CSS -->
<link href="http://www.juma.io/doc/static/css/bootstrap.min.css" rel="stylesheet">
<link href="http://www.juma.io/doc/static/css/table.css" rel="stylesheet">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<style>
.navbar-brand{
padding:0px;
width: 120px;
background-image: url("http://www.juma.io/doc/static/JUMA-LOGO.png");
background-size: 60% 40%;
background-repeat: no-repeat;
background-position: center;
}
.content-section-a {
padding: 20px 0;
background-color: #f8f8f8;
}
.well-font { font-size: 16px; }
</style>
<SCRIPT>
var menu_wwwzzjsnet=function(){
var t=15,z=50,s=6,a;
function dd(n){this.n=n; this.h=[]; this.c=[]}
dd.prototype.init=function(p,c){
a=c; var w=document.getElementById(p), s=w.getElementsByTagName('ul'), l=s.length, i=0;
for(i;i<l;i++){
var h=s[i].parentNode; this.h[i]=h; this.c[i]=s[i];
h.onmouseover=new Function(this.n+'.st('+i+',true)');
h.onmouseout=new Function(this.n+'.st('+i+')');
}
}
dd.prototype.st=function(x,f){
var c=this.c[x], h=this.h[x], p=h.getElementsByTagName('a')[0];
clearInterval(c.t); c.style.overflow='hidden';
if(f){
p.className+=' '+a;
if(!c.mh){c.style.display='block'; c.style.height=''; c.mh=c.offsetHeight; c.style.height=0}
if(c.mh==c.offsetHeight){c.style.overflow='visible'}
else{c.style.zIndex=z; z++; c.t=setInterval(function(){sl(c,1)},t)}
}else{p.className=p.className.replace(a,''); c.t=setInterval(function(){sl(c,-1)},t)}
}
function sl(c,f){
var h=c.offsetHeight;
if((h<=0&&f!=1)||(h>=c.mh&&f==1)){
if(f==1){c.style.filter=''; c.style.opacity=1; c.style.overflow='visible'}
clearInterval(c.t); return
}
var d=(f==1)?Math.ceil((c.mh-h)/s):Math.ceil(h/s), o=h/c.mh;
c.style.opacity=o; c.style.filter='alpha(opacity='+(o*100)+')';
c.style.height=h+(d*f)+'px'
}
return{dd:dd}
}();
</SCRIPT>
</head>
<body>
<nav class="navbar navbar-inverse">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://www.juma.io"></a>
</div>
<div id="navbar" class="collapse navbar-collapse">
<ul class="nav navbar-nav">
<li><a href="http://www.juma.io/doc/zh/introduction.html">概述</a></li>
<li><a href="http://www.juma.io/doc/zh/boards.html">硬件</a></li>
<li><a href="http://www.juma.io/doc/zh/embedded_sdk.html">嵌入式</a></li>
<li><a href="http://www.juma.io/doc/zh/android_sdk.html">Android</a></li>
<li><a href="http://www.juma.io/doc/zh/ios_sdk.html">iOS</a></li>
</ul>
</div><!-- /.nav-collapse -->
</div><!-- /.container -->
</nav><!-- /.navbar -->
<div class="container">
<div class="row row-offcanvas row-offcanvas-right">
<div class="col-xs-12 col-sm-9">
<h1 id="红外发射参数配置">红外发射参数配置</h1>
<hr />
<h2 id="函数声明">函数声明</h2>
<pre><code>uint32_t ble_infrared_config(ble_infrared_init_struct * Init_struct);</code></pre>
<hr />
<h2 id="函数功能">函数功能</h2>
<p>对接下来要发送的红外内容进行必要的参数配置。</p>
<hr />
<h2 id="函数特点">函数特点</h2>
<p>在JUMA SDK的封装中，为用户提供了一个简易的红外发送功能，通过这个简易的红外发送装置，可以实现对常见的大多数的设备的控制。</p>
<p>另外，在本功能中采用的是将调制信号，和信号分开的方案，在红外发射管的正极加红外信号，在红外发射管的负极加调制信号，这样由于红外发射管是一个二极管，所以发送的信号也就等效于是将两个信号混合到一起进行发射了。 这样做的另外一个好处就是可以将红外的信号脚直接与原一体化的接收头进过一个简单的非门连接，从而达到将原来需要红外控制的设备改装成蓝牙控制的。</p>
<hr />
<h2 id="函数参数">函数参数</h2>
<table>
<thead>
<tr class="header">
<th align="left">参数</th>
<th align="left">数据类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><em>Init_struct</em></td>
<td align="left">ble_infrared_init_struct *</td>
<td align="left">红外配置的结构体</td>
</tr>
<tr class="even">
<td align="left"><em>返回值</em></td>
<td align="left">无</td>
<td align="left">无</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="关于-init_struct-的描述">关于 <em>Init_struct</em> 的描述</h3>
<p>这个参数就是要用来对红外发送设备进行配置的全部内容，其整体定义在juma_sdk_types.h中有对其的详细说明。</p>
<pre><code>typedef enum
{
  PWM_HEAD_END = 0              //当前只完成了对最常见的红外遥控的编码    
}infraredProtocal;</code></pre>
<pre><code>typedef struct ble_infrared_init_struct_
{
  infraredProtocal Protocal_type;
    
  union {
    ble_infrared_pwm_config_struct pwm;
  }type_data;
    
}ble_infrared_init_struct;</code></pre>
<pre><code>typedef struct ble_infrared_pwm_config_struct_
{
    uint8_t infrared_signal_pin;          //pin num for infrared signal pin
    uint8_t infrared_shock_pin;           //pin num for shock signal pin
    
    //carrier
    uint16_t carrier_period;              //the time value of carrier period
    uint16_t carrier_plus;                //the time value of carrier hight time
                
    //guidance              
    uint16_t guidance_burst;              //the carrier period number of guidance burst
    uint16_t guidance_space;              //the carrier period number of guidance space
                
    uint16_t logic_0_burst;               //the carrier period number of logic 0 sending burst
    uint16_t logic_0_space;               //the carrier period number of logic 0 sending space
                
    //logic 1             
    uint16_t logic_1_burst;               //the carrier period number of logic 1 sending burst
    uint16_t logic_1_space;               //the carrier period number of logic 1 sending space
    
    //end
    uint16_t end_burst;                   //the carrier period number of end gap burst 
    
}ble_infrared_pwm_config_struct;
</code></pre>
<p>上面结构体中各个参数代表的意义分别是：</p>
<pre><code>infrared_signal_pin  //表示的是在使用过程中红外信号要输出的引脚</code></pre>
<p>``````<code>infrared_shock_pin  //表示的是红外的调制信号要输出的引脚</code></p>
<pre><code>carrier_period      //表示的是载波调制信号的周期.
                    //其计算公式为 period = (1/8 us)*carrier_period ;
                    //当carrier_period取值为214的时候计算值为 26us, 频率为38.461，实测为37.9多点.
                    //能够非常好的支持现在大多数常见的红外一体化接受管</code></pre>
<pre><code>carrier_plus        //用于设定红外发射载波的占空比，一般来说载波占空比。
                    //一般来说采用 carrier_period的1/3可取得良好的发射效果.
                    //当然也可以根据具体的情况来决定如何来使用。</code></pre>
<pre><code>guidance_burst      //起始信号的高电平时间，取值表示的红外载波周期的倍数。实际高电平时间为 guidance_burst*载波周期
                    //之所以这样取值，是因为如果信号的变化和周期的变化不同步的话，出来的红外信号一般各个的间隔会有差异。
                    //而且红外信号相对于载波周期来说，一般是比较长的，所以，不多的几个周期的差别在实际的项目中是完全可被容忍的。</code></pre>
<pre><code>guidance_space      //起始信号的低电平的时间，其取值为红外载波周期的倍数。实际高电平时间为 guidance_space*载波周期
                    //其他的特性与guidance_burst一样</code></pre>
<pre><code>logic_0_burst       //逻辑0 高电平的时间，其他特性与 guidance_burst与guidance_space类似.</code></pre>
<pre><code>logic_0_space       //逻辑0 低电平的时间，其他特性与 guidance_burst与guidance_space类似.</code></pre>
<pre><code>logic_1_burst       //逻辑1 高电平的时间，其他特性与 guidance_burst与guidance_space类似.</code></pre>
<pre><code>logic_1_space       //逻辑1 低电平的时间，其他特性与 guidance_burst与guidance_space类似.</code></pre>
<pre><code>end_burst           //结束时的高电平时间，其他特性与 guidance_burst与guidance_space类似.</code></pre>
<p>经过上面的配置后，即可调用其他的发射接口来进行发射了，当发射完毕后会进入一段时间的低电平时间，此时可以进行适当的延时（延时由用户决定）之后继续发送其他的内容。</p>
<hr />
<h2 id="函数举例">函数举例</h2>
<pre><code>    //当前函数
    void foo()
    {
        ...
        ble_infrared_init_struct init_struct;
        
        init_struct.Protocal_type = PWM_HEAD_END;
        
        init_struct.type_data.pwm.infrared_shock_pin = 6;
        init_struct.type_data.pwm.infrared_signal_pin = 5;
        
        init_struct.type_data.pwm.carrier_period = 214;
        init_struct.type_data.pwm.carrier_plus   = 150;
        
        init_struct.type_data.pwm.guidance_burst = 342;
        init_struct.type_data.pwm.guidance_space = 170;
        
        init_struct.type_data.pwm.logic_0_burst  = 21;
        init_struct.type_data.pwm.logic_0_space  = 21;
        
        init_struct.type_data.pwm.logic_1_burst  = 21;
        init_struct.type_data.pwm.logic_1_space  = 62;
                
        init_struct.type_data.pwm.end_burst      = 21;
        
        ble_infrared_config(&amp;init_struct);

        
        ble_infrared_send(&quot;MSB byte&quot;, 32);
        ...
    }</code></pre>

</div>
<div class="col-xs-6 col-sm-3" id="sidebar">
<div class="list-group">

<h4><Strong>教程</Strong></h4>

<a href="http://www.juma.io/doc/zh/embedded_sdk/guide/instruction.html">使用说明</a>
<ul class="menu_wwwzzjsnet">

</ul>


<h4><Strong>API</Strong></h4>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble.html">BLE相关</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_get_id.html">获取设备ID</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_set_name.html">设置设备名称</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_select_address.html">选择广播地址</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_set_advertising_interval.html">设定广播间隔</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_start_advertising.html">开始广播</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_stop_advertising.html">停止广播</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_on_connect.html">建立连接事件</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_on_disconnect.html">断开连接事件</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_disconnect.html">断开连接</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_send.html">发送数据</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_on_message.html">收到数据事件</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_is_connected.html">是否连接</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_device_set_tx_power.html">设置发射功率</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ble/ble_init_bluenrg.html">初始化blueNRG</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/adc.html">模数转换</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/adc/adc_measure.html">ADC测量数据</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/adc/vcc_measure.html">VCC测量数据</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/adc/get_temperature.html">获取芯片温度</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/data_storage.html">数据存储</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/data_storage/data_storage_read.html">读数据</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/data_storage/data_storage_write.html">写数据</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/data_storage/data_storage_on_finish.html">储存完成</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx.html">绘图库</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_init_screen.html">初始化</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_clear.html">清除显示区域</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_draw_circle.html">绘制圆形框</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_draw_rect.html">绘制矩形框</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_fill_circle.html">绘制圆形区域</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_fill_rect.html">绘制矩形区域</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_draw_image.html">绘制指定图片</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_draw_line.html">绘制线段</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_draw_pixel.html">绘制像素点</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_set_font.html">设定字体</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_draw_char.html">绘制字符</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gfx/gfx_draw_string.html">绘制字符串</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/ext_int.html">外部中断</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ext_int/gpio_watch.html">注册回调函数</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ext_int/gpio_unwatch.html">解除回调函数</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/ext_int/gpio_on_change.html">GPIO状态变化</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/gpio.html">GPIO</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gpio/gpio_setup.html">配置GPIO</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gpio/gpio_read.html">读取GPIO</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/gpio/gpio_write.html">写入GPIO</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/infrared.html">红外</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/infrared/ble_infrared_config.html">红外参数配置</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/infrared/ble_infrared_get_statue.html">获取红外当前状态</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/infrared/ble_infrared_send.html">发射红外数据</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/light.html">RGB调光灯</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/light/light_setup.html">调光灯配置</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/light/light_on.html">开灯</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/light/light_off.html">关灯</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/light/light_set_color.html">设置颜色</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/serial.html">串口</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/serial/serial_setup.html">串口配置</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/serial/serial_send.html">串口发送数据</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/serial/serial_on_data.html">串口收到数据事件</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/spi.html">SPI</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/spi/spi_setup.html">SPI配置</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/spi/spi_transmit_receive.html">SPI发送接收</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/sound.html">蜂鸣器</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/sound/play_sound.html">发声</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/system.html">系统相关</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/system/on_ready.html">系统就绪事件</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/time_task.html">时间与调度</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/time_task/current_time.html">当前时间</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/time_task/run_after_delay.html">延迟运行</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/time_task/run_at_time.html">定时运行</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/time_task/run_when_idle.html">空闲运行</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/timer.html">定时器</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/timer/timer_init.html">定时器初始化</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/timer/timer_start.html">开始计时</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/timer/timer_stop.html">结束计时</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/timer/timer_on_fired.html">计时完毕事件</a></li>

</ul>

<a href="http://www.juma.io/doc/zh/embedded_sdk/api/watch_dog.html">看门狗</a>
<ul class="menu_wwwzzjsnet">

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/watch_dog/watchDog_Config.html">看门狗配置</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/watch_dog/watchDog_Start.html">看门狗开始</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/watch_dog/watchDog_user_dogX_RR.html">看门狗喂狗</a></li>

<li><a href="http://www.juma.io/doc/zh/embedded_sdk/api/watch_dog/watchDog_on_timerout.html">看门狗回调</a></li>

</ul>


</div>
</div><!--/.sidebar-offcanvas-->
</div><!--/row-->
<hr>
<footer>
<p>&copy; Juma Docs 2015</p>
</footer>
</div><!--/.container-->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="http://www.juma.io/static/js/jquery.min.js"></script>
<script src="http://www.juma.io/static/js/bootstrap.min.js"></script>
</body>
</html>
